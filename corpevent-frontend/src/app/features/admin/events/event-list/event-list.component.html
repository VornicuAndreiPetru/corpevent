<div class="container mt-4 admin-events-page">


  <div class="page-header mb-4 d-flex justify-content-between align-items-center">
    <div>
      <h2>Administrare evenimente</h2>
    </div>


  </div>


  <div *ngIf="showForm" class="card shadow-sm mb-4">
    <div class="card-body">

      <h4 class="mb-3">
        {{ editing ? 'Editează eveniment' : 'Creează eveniment nou' }}
      </h4>

      <form (ngSubmit)="save()">

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Nume</label>
            <input class="form-control"
                   [(ngModel)]="form.name"
                   name="name"
                   required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Tip</label>
            <select class="form-control"
                    [(ngModel)]="form.type"
                    name="type"
                    required>
              <option value="PRODUS_NOU">Produs nou</option>
              <option value="ACTUALIZARI_MAJORE">Actualizări majore</option>
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Descriere</label>
          <textarea class="form-control"
                    rows="3"
                    [(ngModel)]="form.description"
                    name="description">
          </textarea>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Data evenimentului</label>
            <input type="datetime-local"
                   class="form-control"
                   [(ngModel)]="form.eventDate"
                   name="eventDate"
                   required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Număr locuri</label>
            <input type="number"
                   class="form-control"
                   [(ngModel)]="form.maxPlaces"
                   name="maxPlaces"
                   required>
          </div>
        </div>

        <div class="d-flex gap-2 mt-3">
          <button class="btn btn-success">
            {{ editing ? 'Salvează modificările' : 'Creează eveniment' }}
          </button>

          <button type="button"
                  class="btn btn-outline-secondary"
                  (click)="cancel()">
            Anulează
          </button>
        </div>

      </form>
    </div>
  </div>


  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary"></div>
  </div>


  <div *ngIf="!loading && events.length > 0" class="card shadow-sm">
    <div class="card-body p-0">

      <table class="table table-hover mb-0">
        <thead>
        <tr>
          <th>ID</th>
          <th>Nume</th>
          <th>Tip</th>
          <th>Data</th>
          <th>Locuri</th>
          <th class="text-end">Acțiuni</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let e of events">
          <td class="text-muted">#{{ e.id }}</td>
          <td><strong>{{ e.name }}</strong></td>
          <td>
            <span class="type-badge">
              {{ e.type }}
            </span>
          </td>
          <td>{{ e.eventDate | date:'dd MMM yyyy, HH:mm' }}</td>
          <td>{{ e.maxPlaces }}</td>

          <td class="text-end">
            <button class="btn btn-sm btn-warning me-2"
                    (click)="edit(e)">
              Edit
            </button>

            <button class="btn btn-sm btn-danger"
                    (click)="delete(e.id)">
              Șterge
            </button>
          </td>
        </tr>
        </tbody>
      </table>

    </div>
  </div>

  <div *ngIf="!loading && events.length === 0"
       class="alert alert-info mt-4">
    Nu există evenimente.
  </div>

</div>
